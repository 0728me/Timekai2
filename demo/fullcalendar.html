<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Fullcalendar Demo</title>
<link rel="stylesheet" type="text/css" href="../dist/calendar.css" />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
<style type="text/css">
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
    }

    #calendar-container {
        margin: 0;
        padding: 0;
        width: 90%;
        height: 90%;
    }
</style>
</head>
<body>
<div id="calendar-container"></div>
<div><input type="button" id="delete-example" value="스크럼 일정 삭제하기" /></div>
<script type="text/javascript" charset="utf-8" src="./code-snippet.js"></script>
<script type="text/javascript" charset="utf-8" src="../dist/calendar.js"></script>
<script type="text/javascript" charset="utf-8">
(function() {
    // 캘린더 인스턴스 생성
    var calendar = ne.dooray.calendar.FullCalendar({
        defaultView: 'week',
        template: {
            milestone: function(model) {
                return '<span style="color:red;"><i class="fa fa-flag"></i> ' + model.title + '</span>';
            },
            task: function(model) {
                return '&nbsp;&nbsp;#' + model.title;
            },
            allday: function(model) {
                return model.title + ' <i class="fa fa-refresh"></i>';
            },
            time: function(model) {
                return model.title + ' <i class="fa fa-refresh"></i><br />' + model.starts;
            }
        }
    }, document.getElementById('calendar-container'));

    calendar.setCalendarColor('1', { color: '#e8e8e8', bgColor: '#585858', render: false });
    calendar.setCalendarColor('2', { color: '#282828', bgColor: '#dc9656', render: false });
    calendar.setCalendarColor('3', { color: '#a16946', bgColor: '#ab4642', render: false });

    calendar.createEvents([{
        id: "1",
        calendarID: '1',
        title: '스크럼',
        category: 'time',
        dueDateClass: '',
        starts: '2015-11-25T09:40:00+09:00',
        ends: '2015-11-25T10:40:00+09:00'
    }, {
        id: "2",
        calendarID: '2',
        title: '[홍길동]연차',
        category: 'allday',
        dueDateClass: '',
        starts: '2015-11-25T00:00:00+09:00',
        ends: '2015-11-25T23:59:59+09:00'
    }, {
        id: "3",
        calendarID: '3',
        title: '테스트 마일스톤1',
        category: 'milestone',
        dueDateClass: '',
        starts: '',
        ends: '2015-11-25T23:59:59+09:00'
    }, {
        id: "4",
        calendarID: '3',
        title: '테스트 업무',
        category: 'task',
        dueDateClass: 'morning',
        starts: '',
        ends: '2015-11-25T23:59:59+09:00'
    }], true);

    calendar.render();

    var idx = 5;

    // 일정 클릭 이벤트 핸들러
    calendar.on({
        'clickEvent': function(e) {
            console.log('click', e);
        },
        'beforeCreateEvent': function(e) {
            var title = prompt('Name of event to create:');

            if (!title) {
                return;
            }

            calendar.createEvents([{
                id: idx + '',
                calendarID: '',
                title: title,
                isAllDay: e.isAllDay,
                starts: e.starts,
                ends: e.ends,
                category: e.isAllDay ? 'allday' : 'time',
                dueDateClass: ''
            }]);

            idx += 1;

            console.log('select', e);
        },
        'beforeUpdateEvent': function(e) {
            calendar.updateEvent(e.model.id, {
                starts: e.starts,
                ends: e.ends
            });

            console.log('update', e);
        },
        'beforeDeleteEvent': function(e) {
            console.log('delete', e);
        }
    });

    document.getElementById('delete-example').onclick = function() {
        calendar.deleteEvent('1');
    };

    window.onresize = function() {
        calendar.refresh();
    };

    window.cal = calendar;
})();
</script>
</body>
</html>
