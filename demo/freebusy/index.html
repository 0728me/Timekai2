<!DOCTYPE html>
<html>
<head>
<title>Freebusy DEMO</title>
<link rel="stylesheet" type="text/css" href="../../dist/index.css" />
<style type="text/css">
#freebusy {
    width: 800px;
}

* {
    box-sizing: border-box;
}
</style>
</head>
<body>
<div id="freebusy" style="width: 100%; padding: 15px 0;"></div>
<script src="../code-snippet.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="../../dist/index.js"></script>
<script>
(function(w) {
    var fb = ne.dooray.calendar.Freebusy(null, document.getElementById('freebusy'));

    fb.addUsers([{
        id: '1',
        name: '김민형',
        freebusy: [{
            from: '2015-01-01T09:00:00+09:00',
            to: '2015-01-01T09:30:00+09:00'
        }, {
            from: '2015-01-01T15:00:00+09:00',
            to: '2015-01-01T16:00:00+09:00'
        }]
    }, {
        id: '2',
        name: '테스트',
        freebusy: [{
            from: '2015-01-01T09:00:00+09:00',
            to: '2015-01-01T11:30:00+09:00'
        }]
    },
    {
        id: '3',
        name: '테스트',
        freebusy: [{
            from: '2015-01-01T09:00:00+09:00',
            to: '2015-01-01T11:30:00+09:00'
        }]
    },{
        id: '4',
        name: '테스트',
        freebusy: [{
            from: '2015-01-01T09:00:00+09:00',
            to: '2015-01-01T11:30:00+09:00'
        }]
    },{
        id: '5',
        name: '테스트',
        freebusy: [{
            from: '2015-01-01T09:00:00+09:00',
            to: '2015-01-01T11:30:00+09:00'
        }]
    },{
        id: '6',
        name: '테스트',
        freebusy: [{
            from: '2015-01-01T09:00:00+09:00',
            to: '2015-01-01T11:30:00+09:00'
        }]
    },{
        id: '7',
        name: '테스트',
        freebusy: [{
            from: '2015-01-01T09:00:00+09:00',
            to: '2015-01-01T11:30:00+09:00'
        }]
    },{
        id: '8',
        name: '테스트',
        freebusy: [{
            from: '2015-01-01T09:00:00+09:00',
            to: '2015-01-01T11:30:00+09:00'
        }]
    }], false);

    fb.addRecommends([
        {from: '2015-01-01T11:30:00+09:00', to: '2015-01-01T12:30:00+09:00'},
        {from: '2015-01-01T16:30:00+09:00', to: '2015-01-01T17:30:00+09:00'}
    ], false);

    fb.render();

    fb.on('click', function(e) {
        var datetime = ne.dooray.calendar.datetime,
            after30min = (function() {
                var d = new Date(null),
                    part = e.time.split(':');

                d.setHours(+part[0], +part[1]);

                return (datetime.format(new Date(+d + (datetime.MILLISECONDS_PER_MINUTES * 90)), 'HH:mm'));
        })();
        fb.select(e.time, after30min);
    });

    fb.on('mousemove', function(e) {
        var datetime = ne.dooray.calendar.datetime,
                after30min = (function() {
                    var d = new Date(null),
                            part = e.time.split(':');

                    d.setHours(+part[0], +part[1]);

                    return (datetime.format(new Date(+d + (datetime.MILLISECONDS_PER_MINUTES * 90)), 'HH:mm'));
                })();
        fb.selectOver(e.time, after30min);
    });

    fb.on('afterRender', function(){
      console.log('fire')
    })

    w.fb = fb;
})(window);
</script>
</body>
</html>
