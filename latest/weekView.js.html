

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: weekView.js | FullCalendar</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 150px; height: 13px">
        
            <a href="https://github.com/nhnent/tui.jsdoc-template" rel="noopener noreferrer" target="_blank">
                <img src="https://cloud.githubusercontent.com/assets/12269563/20029815/01133928-a39a-11e6-80f3-12500a91c755.png" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">FullCalendar</a></h1>
        
            <span class="version">v0.0.1</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="api-tab">
                <a href="#"><h4>API</h4></a>
            </li>
            <li id="examples-tab">
                <a href="#"><h4>Examples</h4></a>
            </li>
        </ol>
    
    <div class="lnb-examples hidden"><h3>Examples</h3><ul><li><a href="tutorial-example01-basic.html">example01-basic</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="example01-basic_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Calendar.html">Calendar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Calendar_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Calendar.html#calendarColor">calendarColor</a></li><li><a href="Calendar.html#container">container</a></li><li><a href="Calendar.html#controller">controller</a></li><li><a href="Calendar.html#dragHandler">dragHandler</a></li><li><a href="Calendar.html#layout">layout</a></li><li><a href="Calendar.html#options">options</a></li><li><a href="Calendar.html#prevViewName">prevViewName</a></li><li><a href="Calendar.html#refreshMethod">refreshMethod</a></li><li><a href="Calendar.html#renderDate">renderDate</a></li><li><a href="Calendar.html#scrollToNowMethod">scrollToNowMethod</a></li><li><a href="Calendar.html#viewName">viewName</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Calendar.html#.setTimezoneOffset">setTimezoneOffset</a></li><li><a href="Calendar.html#_onBeforeCreate">_onBeforeCreate</a></li><li><a href="Calendar.html#_onBeforeUpdate">_onBeforeUpdate</a></li><li><a href="Calendar.html#_onClick">_onClick</a></li><li><a href="Calendar.html#_onClickDayname">_onClickDayname</a></li><li><a href="Calendar.html#_onResizePanel">_onResizePanel</a></li><li><a href="Calendar.html#_setViewName">_setViewName</a></li><li><a href="Calendar.html#_toggleViewEvent">_toggleViewEvent</a></li><li><a href="Calendar.html#clear">clear</a></li><li><a href="Calendar.html#createController">createController</a></li><li><a href="Calendar.html#createEvents">createEvents</a></li><li><a href="Calendar.html#createMonthView">createMonthView</a></li><li><a href="Calendar.html#createWeekView">createWeekView</a></li><li><a href="Calendar.html#deleteEvent">deleteEvent</a></li><li><a href="Calendar.html#destroy">destroy</a></li><li><a href="Calendar.html#getCurrentView">getCurrentView</a></li><li><a href="Calendar.html#getEvent">getEvent</a></li><li><a href="Calendar.html#hideEventsByCalendarID">hideEventsByCalendarID</a></li><li><a href="Calendar.html#initialize">initialize</a></li><li><a href="Calendar.html#move">move</a></li><li><a href="Calendar.html#next">next</a></li><li><a href="Calendar.html#prev">prev</a></li><li><a href="Calendar.html#refresh">refresh</a></li><li><a href="Calendar.html#refreshChildView">refreshChildView</a></li><li><a href="Calendar.html#render">render</a></li><li><a href="Calendar.html#scrollToNow">scrollToNow</a></li><li><a href="Calendar.html#setCalendarColor">setCalendarColor</a></li><li><a href="Calendar.html#setDate">setDate</a></li><li><a href="Calendar.html#showEventsByCalendarID">showEventsByCalendarID</a></li><li><a href="Calendar.html#today">today</a></li><li><a href="Calendar.html#toggleDoorayView">toggleDoorayView</a></li><li><a href="Calendar.html#toggleView">toggleView</a></li><li><a href="Calendar.html#updateEvent">updateEvent</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Calendar.html#event:beforeDeleteEvent">beforeDeleteEvent</a></li><li><a href="Calendar.html#event:beforeUpdateEvent">beforeUpdateEvent</a></li><li><a href="Calendar.html#event:resizePanel">resizePanel</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li class="hidden"><a href="global.html#CalEvent">CalEvent</a></li><li><a href="global.html#createMonthView">createMonthView</a></li><li><a href="global.html#mixin">mixin</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Factory module for WeekView
 * @author NHN Ent. FE Development Team &lt;dl_javascript@nhnent.com>
 */
'use strict';

var util = global.tui.util;
var config = require('../config');
var domutil = require('../common/domutil');
var VLayout = require('../common/vlayout');
// Parent views
var Week = require('../view/week/week');

// Sub views
var DayName = require('../view/week/dayname');
var TimeGrid = require('../view/week/timeGrid');
var Allday = require('../view/week/allday');
var Milestone = require('../view/week/milestone');
var TaskView = require('../view/week/taskview');

// Handlers
var AlldayClick = require('../handler/allday/click');
var AlldayCreation = require('../handler/allday/creation');
var AlldayMove = require('../handler/allday/move');
var AlldayResize = require('../handler/allday/resize');
var DayNameClick = require('../handler/time/clickDayname');
var TimeClick = require('../handler/time/click');
var TimeCreation = require('../handler/time/creation');
var TimeMove = require('../handler/time/move');
var TimeResize = require('../handler/time/resize');
var MilestoneClick = require('../handler/milestone/click');
var TaskClick = require('../handler/task/click');

module.exports = function(baseController, layoutContainer, dragHandler, options) {
    var weekView, dayNameContainer, dayNameView, vLayoutContainer, vLayout,
        milestoneView, taskView, alldayView, timeGridView,
        milestoneClickHandler, taskClickHandler, alldayClickHandler, alldayCreationHandler,
        alldayMoveHandler, alldayResizeHandler, timeClickHandler, timeCreationHandler,
        timeMoveHandler, timeResizeHandler, daynameClickHandler,
        panels;

    weekView = new Week(null, options.week, layoutContainer);
    dayNameContainer = domutil.appendHTMLElement('div', weekView.container, config.classname('dayname-layout'));

    /**********
     * 일자표기 (상단 일월화수...)
     **********/
    dayNameView = new DayName(options.week, dayNameContainer);
    daynameClickHandler = new DayNameClick(dragHandler, dayNameView, baseController);
    weekView.addChild(dayNameView);

    /**********
     * 수직 레이아웃 모듈 초기화
     **********/
    vLayoutContainer = domutil.appendHTMLElement('div', weekView.container, config.classname('vlayout-area'));
    vLayoutContainer.style.height = (domutil.getSize(weekView.container)[1] -
                                     dayNameView.container.offsetHeight) + 'px';

    panels = [
        {height: 100, minHeight: 100},
        {isSplitter: true},
        {autoHeight: true}
    ];

    if (options.isDoorayView) {
        panels = [
            {minHeight: 20, maxHeight: 80},
            {isSplitter: true},
            {minHeight: 40, maxHeight: 120},
            {isSplitter: true},
            {minHeight: 20, maxHeight: 80},
            {isSplitter: true},
            {autoHeight: true}
        ];
    }

    vLayout = new VLayout({
        panels: panels,
        panelHeights: options.week.panelHeights || []
    }, vLayoutContainer);

    weekView.vLayout = vLayout;

    if (options.isDoorayView) {
        /**********
         * 마일스톤
         **********/
        milestoneView = new Milestone(options.week, vLayout.panels[0].container);
        milestoneView.on('afterRender', function(viewModel) {
            vLayout.panels[0].setHeight(null, viewModel.height);
        });
        weekView.addChild(milestoneView);
        milestoneClickHandler = new MilestoneClick(dragHandler, milestoneView, baseController);

        /**********
         * 업무
         **********/
        taskView = new TaskView(options.week, vLayout.panels[2].container);
        taskView.on('afterRender', function(viewModel) {
            vLayout.panels[2].setHeight(null, viewModel.height);
        });
        weekView.addChild(taskView);
        taskClickHandler = new TaskClick(dragHandler, taskView, baseController);
    }

    /**********
     * 종일일정
     **********/
    alldayView = new Allday(options.week, vLayout.panels[panels.length - 3].container);
    alldayView.on('afterRender', function() {
        vLayout.panels[panels.length - 3].setHeight(null, alldayView.contentHeight);
    });
    weekView.addChild(alldayView);
    alldayClickHandler = new AlldayClick(dragHandler, alldayView, baseController);
    alldayCreationHandler = new AlldayCreation(dragHandler, alldayView, baseController);
    alldayMoveHandler = new AlldayMove(dragHandler, alldayView, baseController);
    alldayResizeHandler = new AlldayResize(dragHandler, alldayView, baseController);

    /**********
     * 시간별 일정
     **********/
    timeGridView = new TimeGrid(options.week, vLayout.panels[panels.length - 1].container);
    weekView.addChild(timeGridView);
    timeClickHandler = new TimeClick(dragHandler, timeGridView, baseController);
    timeCreationHandler = new TimeCreation(dragHandler, timeGridView, baseController);
    timeMoveHandler = new TimeMove(dragHandler, timeGridView, baseController);
    timeResizeHandler = new TimeResize(dragHandler, timeGridView, baseController);

    weekView.on('afterRender', function() {
        vLayout.refresh();
    });

    weekView.handler = {
        click: {
            allday: alldayClickHandler,
            time: timeClickHandler
        },
        dayname: {
            date: daynameClickHandler
        },
        creation: {
            allday: alldayCreationHandler,
            time: timeCreationHandler
        },
        move: {
            allday: alldayMoveHandler,
            time: timeMoveHandler
        },
        resize: {
            allday: alldayResizeHandler,
            time: timeResizeHandler
        }
    };

    if (options.isDoorayView) {
        weekView.handler.click.milestone = milestoneClickHandler;
        weekView.handler.click.task = taskClickHandler;
    }

    // add controller
    weekView.controller = baseController.Week;

    // add destroy
    weekView._beforeDestroy = function() {
        util.forEach(weekView.handler, function(type) {
            util.forEach(type, function(handler) {
                handler.off();
                handler.destroy();
            });
        });

        weekView.off();
    };

    return {
        view: weekView,
        refresh: function() {
            var weekViewHeight = weekView.getViewBound().height,
                daynameViewHeight = domutil.getBCRect(
                    dayNameView.container
                ).height;

            vLayout.container.style.height =
                weekViewHeight - daynameViewHeight + 'px';
            vLayout.refresh();
        },
        scrollToNow: timeGridView.scrollToNow.bind(timeGridView)
    };
};
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://cloud.githubusercontent.com/assets/12269563/20029815/01133928-a39a-11e6-80f3-12500a91c755.png" style="width: 150px; height: 13px">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
